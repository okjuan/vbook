<body>


  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>building this site #2 | juan’s virtual book</title>
<meta name="generator" content="Jekyll v3.9.5">
<meta property="og:title" content="building this site #2">
<meta property="og:locale" content="en_US">
<meta name="description" content="Many features I’ve implemented on this site – e.g. revisions – encourage retroactive editing of posts.">
<meta property="og:description" content="Many features I’ve implemented on this site – e.g. revisions – encourage retroactive editing of posts.">
<link rel="canonical" href="https://okjuan.github.io/vbook/building-this-site-2">
<meta property="og:url" content="https://okjuan.github.io/vbook/building-this-site-2">
<meta property="og:site_name" content="juan’s virtual book">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2025-03-04T00:00:00+00:00">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="building this site #2">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-03-04T00:00:00+00:00","datePublished":"2025-03-04T00:00:00+00:00","description":"Many features I’ve implemented on this site – e.g. revisions – encourage retroactive editing of posts.","headline":"building this site #2","mainEntityOfPage":{"@type":"WebPage","@id":"https://okjuan.github.io/vbook/building-this-site-2"},"url":"https://okjuan.github.io/vbook/building-this-site-2"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/vbook/assets/css/style.css">
<link type="application/atom+xml" rel="alternate" href="https://okjuan.github.io/vbook/feed.xml" title="juan's virtual book">
<link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@300;900&amp;family=Merriweather:ital,wght@1,300&amp;display=swap" rel="stylesheet">
    <link rel="icon" href="/vbook/assets/images/v_lightMode.ico">
  

  <header class="site-header">

    <div class="wrapper">
<a class="site-title" rel="author" href="/vbook/">juan's virtual book</a>

      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger">
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewbox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
            </svg>
          </span>
        </label>

        <div class="trigger">
            
            <a class="page-link" style="" href="/vbook/tags/writing">#writing</a>
            <a class="page-link" style="" href="/vbook/tags/psychology">#psychology</a>
            <a class="page-link" style="" href="/vbook/tags/creativity">#creativity</a>
            <a class="page-link" style="" href="/vbook/tags/thinking">#thinking</a>
            <a class="page-link" style="" href="/vbook/tags/cities">#cities</a>
            
        </div>
      </nav>
    </div>
  </header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting"><header class="post-header">
  <h1 class="post-title p-name" itemprop="name headline">building this site #2</h1>
<div class="paragraph"><p class="post-meta"><time class="dt-published" datetime="2025-03-04T00:00:00+00:00" itemprop="datePublished">
      March 4 2025
    </time>
       (mod. <time class="dt-modified" datetime="2025-07-12T00:00:00+00:00" itemprop="dateModified">July 12 2025</time>)<span id="post-series-nav">
         ◆  See
        the <a href="/vbook/building-this-site">previous post</a> in this series.
      </span></p></div>

  <span class="post-meta-tags">
      
      
      <a href="/vbook/tags/journal">#journal</a>
      
      
      <a href="/vbook/tags/coding">#coding</a>
      
      
      <a href="/vbook/tags/design">#design</a>
      
      
      <a href="/vbook/tags/kaizen">#kaizen</a>
      
      
      <a href="/vbook/tags/writing">#writing</a>
      
  </span>— <span class="backlinks">Mentioned in <a href="/vbook/what-5">what is this site? #5</a></span></header><div class="post-content e-content" itemprop="articleBody">

    
        <div class="paragraph"><p>Many features I’ve implemented on this site – e.g. </p><a class='hover-link'  href="/vbook/building-this-site">revisions</a><div class='hover-card-container'><div class='hover-card'>
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting"><header class="post-header">
  <h1 class="post-title p-name" itemprop="name headline">building this site</h1>
<div class="paragraph"><p class="post-meta"><time class="dt-published" datetime="2024-10-03T00:00:00+00:00" itemprop="datePublished">
      October 3 2024
    </time>
       (mod. <time class="dt-modified" datetime="2025-03-04T00:00:00+00:00" itemprop="dateModified">March 4 2025</time>)<span id="post-series-nav">
         ◆  See
         the <a href="/vbook/building-this-site-2">next post</a> in this series.
      </span></p></div>

  <span class="post-meta-tags">
      
      
      <a href="/vbook/tags/journal">#journal</a>
      
      
      <a href="/vbook/tags/coding">#coding</a>
      
      
      <a href="/vbook/tags/design">#design</a>
      
  </span>— <span class="backlinks">Mentioned in <a href="/vbook/now-6">what I'm doing now #6</a>, <a href="/vbook/building-this-site-2">building this site #2</a>, <a href="/vbook/what-5">what is this site? #5</a></span></header><div class="post-content e-content" itemprop="articleBody">

    
        <div class="paragraph">
<p>In the spirit of making this site dynamic </p>
<a class="hover-link" href="/vbook/virtual-book">like a virtual book</a><p>, I added modified dates and revisions.
<!--more--></p>
</div>

<div class="paragraph"><p>Firstly, I added modified dates to all posts and a way to sort them by post date or modified date.
This discourages me from treating posts like static pieces and instead encourages me to edit, rework, and reimagine them.
I didn’t want to be responsible for manually updating the modified date of a post, so I automated it.</p></div>

<div class="paragraph"><p>For my first attempt at implementing it, I put together a plugin written in Ruby (mostly written by GitHub Copilot) that found the most recent commit’s date for each post by looking through the Git history.
It worked, but it also slowed down my local build a lot.
I found a much better solution: set up a git pre-commit hook that updates the <code class="language-plaintext highlighter-rouge">modified_date</code> in a post’s frontmatter when a change is committed to it.
To implement sorting, I had to use JavaScript.
Working on a static website has made me appreciate how much is possible without JavaScript and what isn’t.</p></div>

<div class="paragraph"><p>More challenging to implement and more exciting to complete was a feature I’m calling Revisions, which shows past edits of select posts.
This one was even more important to automate.
Manually creating a revision for every new post would be a ponderous task that would deincentivize me from making changes.
Automatically generated revisions, on the other hand, excite me to make changes.
I want to see how posts change over time and how the converge to “final” form.</p></div>

<div class="paragraph"><p>So, the main task was to plug into the Jekyll build to generate new pages that represent the difference between every pair of sequential commits in a post’s Git history.
Once I had that, I just had to do some minor coding in HTML and Liquid to add links in a post’s metadata to link to its revisions.</p></div>

<div class="paragraph"><p>After I figured out how to get the full Git word diff between two commits (the <code class="language-plaintext highlighter-rouge">git</code> gem’s API apparently doesn’t expose this part of Git’s functionality), most of the trouble had to do with formatting: stripping Git diff metadata, replacing diff markers with markdown formatting, transforming Markdown to HTML, and styling the HTML.
After I finally got it working locally, I pushed it up to GitHub to kick off the build and publish job.
But after the GitHub Actions finished, the site didn’t look any different!</p></div>

<div class="paragraph"><p>It took me a while to figure out why the GitHub Pages build was passing but not generating any revisions.
I figured the <code class="language-plaintext highlighter-rouge">git</code> gem wasn’t being installed since it isn’t in the list of packages supported by GitHub Pages.
It seemed like the plugin wasn’t running at all.
Only after I added print statements to it did I realize that it <em>was</em> running, but only finding a single commit.
Finally, I fixed it by setting the <code class="language-plaintext highlighter-rouge">fetch-depth</code> of the <code class="language-plaintext highlighter-rouge">checkout</code> action to a pseudoinfinite number so that the full Git history would get processed.</p></div>

<div class="paragraph">
<p>I set it up so I can easily enable or disable revisions for a post by setting <code class="language-plaintext highlighter-rouge">show_revisions</code> in its frontmatter.
So far, I’ve enabled revisions for </p>
<a class="hover-link" href="/vbook/good-shower">what makes a good shower?</a><p>, </p>
<a class="hover-link" href="/vbook/think-invisibly">how to think invisibly</a><p>, and </p>
<a class="hover-link" href="/vbook/tell-a-story-3">how to tell a story #3</a><p>.</p>
</div>
</div>
<a class="u-url" href="/vbook/building-this-site" hidden></a>
</article>

      </div>
    </div></div><p> – encourage retroactive editing of posts.
<!--more-->
Today, I implemented a minor feature in the same spirit: configurable redirects.
This allows me to easily give a post a new URL without making its previous one(s) obsolete.
All I have to do is make two configuration changes in the frontmatter of the relevant post:</p></div>
<ol>
  <li>Specify the new URL via the usual <code class="language-plaintext highlighter-rouge">permalink</code> property e.g. <code class="language-plaintext highlighter-rouge">'/why-write'</code>.</li>
  <li>Add the old URL to the list specified by <code class="language-plaintext highlighter-rouge">redirect_from</code> e.g. <code class="language-plaintext highlighter-rouge">['/justify-writing']</code>.</li>
</ol>

<div class="paragraph"><p>For example, I changed </p><a class='hover-link'  href="/vbook/why-write"><em>okjuan.me/vbook/justify-writing</em></a><div class='hover-card-container'><div class='hover-card'>
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting"><header class="post-header">
  <h1 class="post-title p-name" itemprop="name headline">why write?</h1>
<div class="paragraph"><p class="post-meta"><time class="dt-published" datetime="2023-03-09T00:00:00+00:00" itemprop="datePublished">
      March 9 2023
    </time>
       (mod. <time class="dt-modified" datetime="2025-03-04T00:00:00+00:00" itemprop="dateModified">March 4 2025</time>)</p></div>

  <span class="post-meta-tags">
      
      
      <a href="/vbook/tags/mediums">#mediums</a>
      
      
      <a href="/vbook/tags/art">#art</a>
      
      
      <a href="/vbook/tags/writing">#writing</a>
      
  </span>— <span class="backlinks">Mentioned in <a href="/vbook/tell-a-story-2">how to tell a story #2</a>, <a href="/vbook/2024">what I did in 2024</a>, <a href="/vbook/building-this-site-2">building this site #2</a></span></header><div class="post-content e-content" itemprop="articleBody">

    
        <div class="paragraph"><p>Writing <a href="https://okjuan.medium.com/the-virtual-book-part-1-782ccd4cc360">The Virtual Book</a> forced me to ask: when <em>is</em> writing the best medium?
<!--more--></p></div>

<div class="paragraph"><p>Something wonderful about writing is its economy.
The only equipment you need is brain, paper, and pen.
To document a journey through the Alaskan wilderness, for example, you don’t need to bring cameras, microphones, or personnel.
The trip continues without the slowing of setup and teardown.
You move as you would if there wasn’t a writer tagging along.</p></div>

<div class="paragraph"><p>What’s more, there is no extra gear or logistics to obstruct encounters with the landscape and your fellow humans.
The writer and all others are freed into the experience.</p></div>

<div class="paragraph"><p>The experience is different for the audience, too.
Writing sacrifices the sensorial experience for one deeper into the realm of imagination.
The action is staged entirely in the mind.
The reduction of reality into abstract symbols is both a restriction and a release.
A loosed connection to time and space means the reading experience is less grounded in reality, but also less confined to it.</p></div>
</div>
<a class="u-url" href="/vbook/why-write" hidden></a>
</article>

      </div>
    </div></div><p> to </p><a class='hover-link'  href="/vbook/why-write"><em>okjuan.me/vbook/why-write</em></a><div class='hover-card-container'><div class='hover-card'>
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting"><header class="post-header">
  <h1 class="post-title p-name" itemprop="name headline">why write?</h1>
<div class="paragraph"><p class="post-meta"><time class="dt-published" datetime="2023-03-09T00:00:00+00:00" itemprop="datePublished">
      March 9 2023
    </time>
       (mod. <time class="dt-modified" datetime="2025-03-04T00:00:00+00:00" itemprop="dateModified">March 4 2025</time>)</p></div>

  <span class="post-meta-tags">
      
      
      <a href="/vbook/tags/mediums">#mediums</a>
      
      
      <a href="/vbook/tags/art">#art</a>
      
      
      <a href="/vbook/tags/writing">#writing</a>
      
  </span>— <span class="backlinks">Mentioned in <a href="/vbook/tell-a-story-2">how to tell a story #2</a>, <a href="/vbook/2024">what I did in 2024</a>, <a href="/vbook/building-this-site-2">building this site #2</a></span></header><div class="post-content e-content" itemprop="articleBody">

    
        <div class="paragraph"><p>Writing <a href="https://okjuan.medium.com/the-virtual-book-part-1-782ccd4cc360">The Virtual Book</a> forced me to ask: when <em>is</em> writing the best medium?
<!--more--></p></div>

<div class="paragraph"><p>Something wonderful about writing is its economy.
The only equipment you need is brain, paper, and pen.
To document a journey through the Alaskan wilderness, for example, you don’t need to bring cameras, microphones, or personnel.
The trip continues without the slowing of setup and teardown.
You move as you would if there wasn’t a writer tagging along.</p></div>

<div class="paragraph"><p>What’s more, there is no extra gear or logistics to obstruct encounters with the landscape and your fellow humans.
The writer and all others are freed into the experience.</p></div>

<div class="paragraph"><p>The experience is different for the audience, too.
Writing sacrifices the sensorial experience for one deeper into the realm of imagination.
The action is staged entirely in the mind.
The reduction of reality into abstract symbols is both a restriction and a release.
A loosed connection to time and space means the reading experience is less grounded in reality, but also less confined to it.</p></div>
</div>
<a class="u-url" href="/vbook/why-write" hidden></a>
</article>

      </div>
    </div></div><p>.
If I later decide to change the URL again e.g. to <em>okjuan.me/vbook/why-i-write</em>, I just have to set <code class="language-plaintext highlighter-rouge">permalink: /why-i-write</code> and <code class="language-plaintext highlighter-rouge">redirect_from: ['why-write', '/justify-writing']</code> in the post’s frontmatter.</p></div>

<div class="paragraph"><p>A nice side-effect of this change is that I can make a post’s URL match its title even if I change it.
Another perk is that I can easily update <em>okjuan.me/vbook/now</em> to point to my latest <em>what I’m doing now</em> post.
But probably this feature’s most useful effect, and the reason I thought to implement it in the first place, is that it lets me realign a post into a series.
For example, by changing the title of <em>how to justify writing</em> to <em>why write?</em>, I can make it the first entry in a series that I can create by writing posts <em>why write? #2</em>, <em>why write? #3</em>, and so on.</p></div>
</div>
<a class="u-url" href="/vbook/building-this-site-2" hidden></a>
</article>

      </div>
    </main>

    <footer class="site-footer h-card">
      <data class="u-url" href="/vbook/"></data>

      <div class="wrapper">
        <div class="footer-col-wrapper">
          <div class="paragraph"><p><a href="/vbook/what">What is this site?</a></p></div>
        </div>
      </div>

    </footer>

    
      <script src="/vbook/assets/js/post.js"></script>
    

    <script src="/vbook/assets/js/order_posts_list.js"></script>

  


</body>